{"ast":null,"code":"import { scheduleMicrotask } from './utils.mjs';\n\nfunction createNotifyManager() {\n  var queue = [];\n  var transactions = 0;\n\n  var notifyFn = function notifyFn(callback) {\n    callback();\n  };\n\n  var batchNotifyFn = function batchNotifyFn(callback) {\n    callback();\n  };\n\n  var batch = function batch(callback) {\n    var result;\n    transactions++;\n\n    try {\n      result = callback();\n    } finally {\n      transactions--;\n\n      if (!transactions) {\n        flush();\n      }\n    }\n\n    return result;\n  };\n\n  var schedule = function schedule(callback) {\n    if (transactions) {\n      queue.push(callback);\n    } else {\n      scheduleMicrotask(function () {\n        notifyFn(callback);\n      });\n    }\n  };\n  /**\n   * All calls to the wrapped function will be batched.\n   */\n\n\n  var batchCalls = function batchCalls(callback) {\n    return function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      schedule(function () {\n        callback.apply(void 0, args);\n      });\n    };\n  };\n\n  var flush = function flush() {\n    var originalQueue = queue;\n    queue = [];\n\n    if (originalQueue.length) {\n      scheduleMicrotask(function () {\n        batchNotifyFn(function () {\n          originalQueue.forEach(function (callback) {\n            notifyFn(callback);\n          });\n        });\n      });\n    }\n  };\n  /**\n   * Use this method to set a custom notify function.\n   * This can be used to for example wrap notifications with `React.act` while running tests.\n   */\n\n\n  var setNotifyFunction = function setNotifyFunction(fn) {\n    notifyFn = fn;\n  };\n  /**\n   * Use this method to set a custom function to batch notifications together into a single tick.\n   * By default React Query will use the batch function provided by ReactDOM or React Native.\n   */\n\n\n  var setBatchNotifyFunction = function setBatchNotifyFunction(fn) {\n    batchNotifyFn = fn;\n  };\n\n  return {\n    batch: batch,\n    batchCalls: batchCalls,\n    schedule: schedule,\n    setNotifyFunction: setNotifyFunction,\n    setBatchNotifyFunction: setBatchNotifyFunction\n  };\n} // SINGLETON\n\n\nvar notifyManager = createNotifyManager();\nexport { createNotifyManager, notifyManager };","map":{"version":3,"mappings":";;AAYO,SAASA,mBAAT,GAA+B;AACpC,MAAIC,KAAuB,GAAG,EAA9B;AACA,MAAIC,YAAY,GAAG,CAAnB;;AACA,MAAIC,QAAwB,GAAIC,0BAAD,EAAc;AAC3CA,YAAQ;AADV;;AAGA,MAAIC,aAAkC,GAAID,+BAAD,EAA0B;AACjEA,YAAQ;AADV;;AAIA,MAAME,KAAK,GAAOF,SAAZE,KAAYF,SAAJ,EAA6B;AACzC,QAAIG,MAAJ;AACAL,gBAAY;;AACZ,QAAI;AACFK,YAAM,GAAGH,QAAQ,EAAjBG;AADF,cAEU;AACRL,kBAAY;;AACZ,UAAI,CAACA,YAAL,EAAmB;AACjBM,aAAK;AACN;AACF;;AACD,WAAOD,MAAP;AAXF;;AAcA,MAAME,QAAQ,GAAIL,SAAZK,QAAYL,SAAD,EAAoC;AACnD,QAAIF,YAAJ,EAAkB;AAChBD,WAAK,CAACS,IAANT,CAAWG,QAAXH;AADF,WAEO;AACLU,uBAAiB,CAAC,YAAM;AACtBR,gBAAQ,CAACC,QAAD,CAARD;AADe,QAAjBQ;AAGD;AAPH;AAUA;AACF;AACA;;;AACE,MAAMC,UAAU,GACdR,SADIQ,UACJR,SADiB,EAES;AAC1B,WAAO,YAAa;AAAA,wCAATS,IAAS;AAATA,YAAS;AAAA;;AAClBJ,cAAQ,CAAC,YAAM;AACbL,gBAAQ,MAARA,SAAYS,IAAZT;AADM,QAARK;AADF;AAHF;;AAUA,MAAMD,KAAK,GAAG,SAARA,KAAQ,GAAY;AACxB,QAAMM,aAAa,GAAGb,KAAtB;AACAA,SAAK,GAAG,EAARA;;AACA,QAAIa,aAAa,CAACC,MAAlB,EAA0B;AACxBJ,uBAAiB,CAAC,YAAM;AACtBN,qBAAa,CAAC,YAAM;AAClBS,uBAAa,CAACE,OAAdF,CAAuBV,kBAAD,EAAc;AAClCD,oBAAQ,CAACC,QAAD,CAARD;AADF;AADW,UAAbE;AADe,QAAjBM;AAOD;AAXH;AAcA;AACF;AACA;AACA;;;AACE,MAAMM,iBAAiB,GAAIC,SAArBD,iBAAqBC,GAAD,EAAwB;AAChDf,YAAQ,GAAGe,EAAXf;AADF;AAIA;AACF;AACA;AACA;;;AACE,MAAMgB,sBAAsB,GAAID,SAA1BC,sBAA0BD,GAAD,EAA6B;AAC1Db,iBAAa,GAAGa,EAAhBb;AADF;;AAIA,SAAO;AACLC,SADK,EACLA,KADK;AAELM,cAFK,EAELA,UAFK;AAGLH,YAHK,EAGLA,QAHK;AAILQ,qBAJK,EAILA,iBAJK;AAKLE;AALK,GAAP;AAOD,C,CAAA;;;AAGYC,iBAAa,GAAGpB,mBAAmB,EAAnCoB","names":["createNotifyManager","queue","transactions","notifyFn","callback","batchNotifyFn","batch","result","flush","schedule","push","scheduleMicrotask","batchCalls","args","originalQueue","length","forEach","setNotifyFunction","fn","setBatchNotifyFunction","notifyManager"],"sources":["C:\\Users\\91987\\Desktop\\Socialoo\\client\\node_modules\\@tanstack\\query-core\\src\\notifyManager.ts"],"sourcesContent":["import { scheduleMicrotask } from './utils'\n\n// TYPES\n\ntype NotifyCallback = () => void\n\ntype NotifyFunction = (callback: () => void) => void\n\ntype BatchNotifyFunction = (callback: () => void) => void\n\ntype BatchCallsCallback<T extends unknown[]> = (...args: T) => void\n\nexport function createNotifyManager() {\n  let queue: NotifyCallback[] = []\n  let transactions = 0\n  let notifyFn: NotifyFunction = (callback) => {\n    callback()\n  }\n  let batchNotifyFn: BatchNotifyFunction = (callback: () => void) => {\n    callback()\n  }\n\n  const batch = <T>(callback: () => T): T => {\n    let result\n    transactions++\n    try {\n      result = callback()\n    } finally {\n      transactions--\n      if (!transactions) {\n        flush()\n      }\n    }\n    return result\n  }\n\n  const schedule = (callback: NotifyCallback): void => {\n    if (transactions) {\n      queue.push(callback)\n    } else {\n      scheduleMicrotask(() => {\n        notifyFn(callback)\n      })\n    }\n  }\n\n  /**\n   * All calls to the wrapped function will be batched.\n   */\n  const batchCalls = <T extends unknown[]>(\n    callback: BatchCallsCallback<T>,\n  ): BatchCallsCallback<T> => {\n    return (...args) => {\n      schedule(() => {\n        callback(...args)\n      })\n    }\n  }\n\n  const flush = (): void => {\n    const originalQueue = queue\n    queue = []\n    if (originalQueue.length) {\n      scheduleMicrotask(() => {\n        batchNotifyFn(() => {\n          originalQueue.forEach((callback) => {\n            notifyFn(callback)\n          })\n        })\n      })\n    }\n  }\n\n  /**\n   * Use this method to set a custom notify function.\n   * This can be used to for example wrap notifications with `React.act` while running tests.\n   */\n  const setNotifyFunction = (fn: NotifyFunction) => {\n    notifyFn = fn\n  }\n\n  /**\n   * Use this method to set a custom function to batch notifications together into a single tick.\n   * By default React Query will use the batch function provided by ReactDOM or React Native.\n   */\n  const setBatchNotifyFunction = (fn: BatchNotifyFunction) => {\n    batchNotifyFn = fn\n  }\n\n  return {\n    batch,\n    batchCalls,\n    schedule,\n    setNotifyFunction,\n    setBatchNotifyFunction,\n  } as const\n}\n\n// SINGLETON\nexport const notifyManager = createNotifyManager()\n"]},"metadata":{},"sourceType":"module"}